<!DOCTYPE HTML>

<html>

<head>
	<title>Landmarks</title>
	<link rel="stylesheet" href="style.css"/>
	<meta charset="utf-8"/>
	<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=true"></script>
 
</head>

<body onload="initMap()">
	<div id="map"></div>
</body>

<script>	
	lat = 0;
	lng = 0;
	var me = new google.maps.LatLng(lat, lng);
	var options = {
		zoom: 13,
		center: me,
		mapTypeId: google.maps.MapTypeId.ROADMAP
	};

	function initMap() {
		var map = new google.maps.Map(document.getElementById('map'), options);
		getLocation();
	}

	function getLocation() 
	{
		if (navigator.geolocation) 
		{
			navigator.geolocation.getCurrentPosition(function(position) {
				lat = position.coords.latitude;
				lng = position.coords.longitude;
				rendering();
			});
		}
		else
			alert("Geolocation not supported in this browser!");
	}

	function rendering() {
		me = new google.maps.LatLng(lat, lng);
		map.panTo(me);
	}

	//SEND AND RECEIVE DATA FROM HEROKU APP
	request = new XMLHttpRequest();
	request.open("POST", "https://defense-in-derpth.herokuapp.com/sendLocation", true);
	request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

	var dataObj;
	request.onreadystatechange = function() {
		if (request.readyState == 4 && request.status == 200)
			var dataObj = JSON.parse(this.responseText);
			console.log(dataObj);
	}

	request.send("login=uKLkLPxv&lat=" + lat + "&lng=" + lng);
</script>


</html>